import{j as s}from"./jsx-runtime-u17CrQMm.js";import{r as l}from"./iframe-DnyE1TII.js";import{L as w}from"./ListManager-Btlbokup.js";import{d as k,S as M}from"./ShareButton-DASe6LQj.js";import{u as L,S as g,a as R,b as P,s as C,c as T,L as y,M as O,R as _,d as $}from"./storage-CoGtwNsp.js";/* empty css              */import"./preload-helper-PPVm8Dsz.js";import"./index-7TpPh_Va.js";import"./index-BIk1wTxh.js";function A(t){const[a,d]=L(g.SHEETS,[]),m=l.useMemo(()=>a.filter(r=>r.spreadsheetId===t).sort((r,o)=>r.order-o.order),[a,t]),h=l.useCallback(r=>{if(!r.trim())return;if(m.some(e=>e.name===r)){alert("This sheet name is already in your list for this spreadsheet.");return}const o=Math.max(-1,...m.map(e=>e.order)),i={spreadsheetId:t,name:r.trim(),order:o+1};d([...a,i])},[a,d,m,t]),x=l.useCallback(r=>{const o=a.filter(e=>!(e.spreadsheetId===t&&e.name===r)),i=o.map(e=>{if(e.spreadsheetId!==t)return e;const p=o.filter(u=>u.spreadsheetId===t).indexOf(e);return{...e,order:p}});d(i)},[a,d,t]),j=l.useCallback(r=>{const o=r.map((e,c)=>({...e,order:c})),i=a.filter(e=>e.spreadsheetId!==t);d([...i,...o])},[a,d,t]);return{sheets:m,add:h,remove:x,reorder:j}}const N=()=>{const{spreadsheetId:t}=R(),[a,d]=P(),m=a.get("max"),h=()=>m?`?max=${m}`:"";if(!t)return s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:[s.jsx("p",{className:"font-bold",children:"Error"}),s.jsx("p",{children:"Missing spreadsheet ID"})]})});const{sheets:x,add:j,remove:r,reorder:o}=A(t);l.useEffect(()=>{const e=a.get("import");if(!e)return;const c=k(e);if(c&&c.sheets){const p=c.sheets.filter(u=>u.spreadsheetId===t);if(p.length>0){const f=[...C(g.SHEETS,[])],v=f.filter(n=>n.spreadsheetId===t),I=Math.max(-1,...v.map(n=>n.order));let b=0;p.forEach(n=>{f.some(E=>E.spreadsheetId===n.spreadsheetId&&E.name===n.name)||(f.push({spreadsheetId:t,name:n.name,order:I+1+b}),b++)}),b>0&&(T(g.SHEETS,f),d(n=>(n.delete("import"),n)),window.location.reload())}}},[]);const i={version:1,sheets:x.map(e=>({...e,spreadsheetId:t}))};return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white shadow-sm border-b",children:s.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-6",children:[s.jsx("nav",{className:"mb-4",children:s.jsx(y,{to:`/${h()}`,className:"text-blue-600 hover:underline text-sm sm:text-base",children:"â† Back to Spreadsheets"})}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Select Sheet"}),s.jsxs("p",{className:"text-sm sm:text-base text-gray-600 mt-2 break-all",children:["Spreadsheet: ",t]})]}),s.jsx("div",{className:"flex-shrink-0",children:s.jsx(M,{data:i})})]})]})}),s.jsx("div",{className:"py-8",children:s.jsx(w,{items:x,onAdd:j,onDelete:e=>r(e.name),onReorder:o,getId:e=>e.name,placeholder:"Enter sheet name (e.g., Math Quiz)",emptyMessage:"No saved sheets yet for this spreadsheet",renderItem:e=>s.jsx(y,{to:`/${t}/${encodeURIComponent(e.name)}${h()}`,className:"block hover:text-blue-600 transition-colors break-words",children:e.name})})})]})};N.__docgenInfo={description:"",methods:[],displayName:"SheetList"};const Y={title:"Pages/SheetList",component:N,parameters:{layout:"fullscreen"},decorators:[t=>s.jsx(O,{initialEntries:["/example-spreadsheet-id"],children:s.jsx(_,{children:s.jsx($,{path:"/:spreadsheetId",element:s.jsx(t,{})})})})]},S={};S.parameters={...S.parameters,docs:{...S.parameters?.docs,source:{originalSource:"{}",...S.parameters?.docs?.source}}};const q=["Empty"];export{S as Empty,q as __namedExportsOrder,Y as default};
