import{j as s}from"./jsx-runtime-u17CrQMm.js";import{r as E}from"./iframe-B9e2Ags3.js";import{L}from"./ListManager-Wf_qx30t.js";import{d as R,S as D}from"./ShareButton-Gs1T37w8.js";import{u as w,S,N as T,b as k,s as N,c as b,L as C,M as H}from"./storage-DK4wIgd6.js";/* empty css              */import"./preload-helper-PPVm8Dsz.js";import"./index-oeC5sRZy.js";import"./index-Dvypqmct.js";function $(){const[e,t]=w(S.SPREADSHEETS,[]),h=E.useCallback(r=>{if(!r.trim())return;if(e.some(i=>i.id===r)){alert("This spreadsheet ID is already in your list.");return}const n={id:r.trim(),order:e.length};t([...e,n])},[e,t]),p=E.useCallback(r=>{const i=e.filter(c=>c.id!==r).map((c,j)=>({...c,order:j}));t(i)},[e,t]),d=E.useCallback(r=>{const n=r.map((i,c)=>({...i,order:c}));t(n)},[t]);return{spreadsheets:[...e].sort((r,n)=>r.order-n.order),add:h,remove:p,reorder:d}}const A=()=>{const e=new URLSearchParams(window.location.search),t=e.get("spreadsheetId"),h=e.get("sheet"),p=e.get("max");if(!t||!h)return null;const d=p?parseInt(p,10):void 0;return{spreadsheetId:t,sheet:h,max:d&&!isNaN(d)&&d>0?d:void 0}},y=()=>{const e=A();if(e?.spreadsheetId&&e?.sheet){const a=`/${e.spreadsheetId}/${encodeURIComponent(e.sheet)}`,o=e.max?`?max=${e.max}`:"";return s.jsx(T,{to:a+o,replace:!0})}const{spreadsheets:t,add:h,remove:p,reorder:d}=$(),[I]=w(S.SHEETS,[]),[r,n]=k(),i=r.get("max"),c=()=>i?`?max=${i}`:"";E.useEffect(()=>{const a=r.get("import");if(!a)return;const o=R(a);if(!o)return;let v=!1;if(o.spreadsheets&&o.spreadsheets.length>0){const x=N(S.SPREADSHEETS,[]),m=[...x],f=x.length;let l=0;o.spreadsheets.forEach(u=>{m.some(P=>P.id===u.id)||(m.push({id:u.id,order:f+l}),l++)}),l>0&&(b(S.SPREADSHEETS,m),v=!0)}if(o.sheets&&o.sheets.length>0){const m=[...N(S.SHEETS,[])];let f=0;o.sheets.forEach(l=>{m.some(u=>u.spreadsheetId===l.spreadsheetId&&u.name===l.name)||(m.push(l),f++)}),f>0&&(b(S.SHEETS,m),v=!0)}v&&(n(x=>(x.delete("import"),x)),window.location.reload())},[]);const j={version:1,spreadsheets:t,sheets:I};return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white shadow-sm border-b",children:s.jsx("div",{className:"max-w-3xl mx-auto px-4 py-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Sheet Quiz"}),s.jsx("p",{className:"text-sm sm:text-base text-gray-600 mt-2",children:"Select a spreadsheet to view available quizzes"})]}),s.jsx("div",{className:"flex-shrink-0",children:s.jsx(D,{data:j})})]})})}),s.jsx("div",{className:"py-8",children:s.jsx(L,{items:t,onAdd:h,onDelete:a=>p(a.id),onReorder:d,getId:a=>a.id,placeholder:"Enter Google Sheets spreadsheet ID",emptyMessage:"No saved spreadsheets yet",renderItem:a=>s.jsx(C,{to:`/${a.id}${c()}`,className:"block hover:text-blue-600 transition-colors break-all",children:a.id})})})]})};y.__docgenInfo={description:"",methods:[],displayName:"SpreadsheetList"};const K={title:"Pages/SpreadsheetList",component:y,parameters:{layout:"fullscreen"},decorators:[e=>s.jsx(H,{initialEntries:["/"],children:s.jsx(e,{})})]},g={};g.parameters={...g.parameters,docs:{...g.parameters?.docs,source:{originalSource:"{}",...g.parameters?.docs?.source}}};const Y=["Empty"];export{g as Empty,Y as __namedExportsOrder,K as default};
